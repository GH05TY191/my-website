<?php
    $host = "localhost";
    $user = "root";
    $pass = "";
    $db = "nekonana";

    // Create a new MySQL connection
    $conn = new mysqli($host, $user, $pass, $db, 3307);

    // Check for connection errors
    if ($conn->connect_error) {
        die("Failed to connect to DB: " . $conn->connect_error);
    }
?>

let puzzleSolution = null; // Global variable to store the solution

async function fetchImage() {
    try {
        const response = await fetch('https://marcconrad.com/uob/banana/api.php?out=json');
        const data = await response.json();
        const imageUrl = data.question;
        puzzleSolution = data.solution; // Store the solution

        const img = document.createElement('img');
        img.src = imageUrl;
        img.alt = "Puzzle Image";
        img.className = 'puzzle-image';

        const puzzleArea = document.getElementById('puzzle-area');
        puzzleArea.innerHTML = ''; // Clear any existing content
        puzzleArea.appendChild(img);
    } catch (error) {
        console.error('Error fetching image:', error);
    }
}

fetchImage();

function confirmAnswer() {
    const userAnswer = document.querySelector('.answer-input').value;
    if (parseInt(userAnswer, 10) === puzzleSolution) {
        showPopup('confirmPopup'); // Show confirm popup if the answer is correct
    } else {
        showPopup('confirmPopup'); // Show confirm popup even if the answer is incorrect for now
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NekoNana Navbar</title>
    <style>
        body {
            margin: 0;
            padding-top: 80px; /* Adjust padding-top based on navbar height */
            background-color: #fffd93;
            font-family: Arial, sans-serif;
        }

        /* Navbar container */
        .navbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #FFF3B0;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 98%;
            max-width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000; /* Ensure navbar stays on top */
        }

        /* Left side: logo and title */
        .navbar-left {
            display: flex;
            align-items: center;
        }

        .logo {
            height: 50px;
            margin-right: 10px;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            color: #F08C00;
            text-shadow: 1px 1px 2px #FFDF70;
        }

        /* Center: round information */
        .round-info {
            font-size: 20px;
            color: #F08C00;
            text-shadow: 1px 1px 2px #FFDF70;
            font-weight: bold;
        }

        /* Right side: score and icons */
        .navbar-right {
            display: flex;
            align-items: center;
        }

        .score {
            font-size: 20px;
            color: #000;
            margin-right: 10px;
        }

        .info-button {
            background-image: url(/NekoNana/Assets/info.png);
            background-color: transparent;
            background-size: cover;
            border: none;
            padding: 0;
            cursor: pointer;
            width: 50px;
            height: 50px;
            margin-left: 5px;
        }


        .exit-button {
            background-image: url(/NekoNana/Assets/exit.png);
            background-color: transparent;
            background-size: cover;
            border: none;
            padding: 0;
            cursor: pointer;
            width: 50px;
            height: 50px;
            margin-left: 5px;
        }

        .info-button:hover {
            background-image: url(/NekoNana/Assets/infohover.png);
        }

        .exit-button:hover {
            background-image: url(/NekoNana/Assets/exithover.png);
        }

        .icon {
            width: 50px;
            height: 50px;
            margin-left: 5px;
        }

        .icon-button:focus {
            outline: none;
        }

        .puzzle-container {
            display: flex;
            align-items: center; /* Aligns items vertically in the middle */
            justify-content: center; /* Centers the items within the container */
            gap: 20px; /* Space between the puzzle-area and answer-section */
            padding: 15px 0; /* Optional padding for better layout */
        }

        /* White container for API image */
        .puzzle-area {
            width: 75%; /* Keep the original width of the puzzle area */
            height: 600px; /* Maintain the same height */
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #ddd;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        .puzzle-image {
            width: 100%;
            height: 100%;
            object-fit: contain; /* Scales the image to fit within the container without cropping */
            display: block;
        }

        .answer-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 25%; /* Adjust width as needed */
        }

        .typeanswer {
            height: 100%;
            width: 100%;
        }

        .answer-input {
            font-size: 20px;
            padding: 5px;
            width: 200px;
            text-align: center;
            margin: 10px;
        }
        
        .confirm-button {
            width: 290px; /* Adjust width as needed */
            height: 60px; /* Adjust height as needed */
            background-image: url('/NekoNana/Assets/cnfm.png');
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            background-color: transparent;
            padding: 0;
            outline: none;
            border: none;
            cursor: pointer;
}
        
        .popup {
            display: none; /* Hidden by default */
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #FFF3B0;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            z-index: 1001; /* Above navbar */
            width: 300px;
            text-align: center;
        }
        .popup .close-btn {
            background-color: #F08C00;
            color: white;
            border: none;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 16px;
            border-radius: 4px;
            margin-top: 10px;
        }
        .popup .close-btn:hover {
            background-color: #e07a00;
        }

        .helppopup{
            height: 100px;
        }

        .infotext{
            font-family: 'Anta Regular', Arial, sans-serif;
        }
        
    </style>
</head>
<body>
    <div class="navbar">
        <!-- Logo -->
        <div class="navbar-left">
            <img src="/NekoNana/Assets/navlogo.png" alt="NekoNana Logo" class="logo">
        </div>

        <!-- Round -->
        <span class="round-info">Round : 3</span>

        <!-- Score and Buttons-->
        <div class="navbar-right">
            <img src="/NekoNana/Assets/points.png" alt="Cat Banana" class="icon">
            <span class="score">X10</span>
            <button class="info-button" onclick="showPopup('infoPopup')">
            </button>
            <a href="home.php">
                <button class="exit-button"></button>
            </a>
        </div>
    </div>

    <div class="puzzle-container">
    <!-- Puzzle Area-->
    <div class="puzzle-area" id="puzzle-area">
        <!-- BANANA API PUZZLE -->
    </div>

    <!-- Answer Section -->
    <div class="answer-section">
    <label>
        <img src="/NekoNana/Assets/answer.png" alt="Type Your Answer" class="typeanswer">
    </label>
    <input type="text" class="answer-input" placeholder="Enter answer here" />
    
    <!-- Confirm Button -->
    <button class="confirm-button" id="confirm-button" onclick="confirmAnswer()">
    </button>
</div>



<!-- PopUp Window -->

<div class="popup" id="infoPopup">
        <img src="/NekoNana/Assets/Logo.png" class="helppopup">
        <p class="infotext">
            Welcome to NekoNana<br>
            Collect as many NekoNanas as you can and see if you can reach the top!<br><br>
            Solve the number puzzle with the help of the Bananas and enter the answer<br><br>
            Good Luck, nyan! And may your solving be pawsome Nyan!!!
        </p>
        <button class="close-btn" onclick="closePopup('infoPopup')">Close</button>
    </div>
</div>

<script src="/NekoNana/Scripts/script.js"></script>
<script src="/NekoNana/Scripts/popscript.js"></script>
</body>
</html>
